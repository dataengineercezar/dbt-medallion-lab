version: 2

models:
  - name: silver__customers
    description: "Cleaned customer data with segmentation"
    columns:
      - name: customer_id
        description: "Primary key"
        data_tests:
          - unique
          - not_null
      - name: email
        description: "Lowercase trimmed email"
        data_tests:
          - not_null
      - name: customer_segment
        description: "Segment based on signup date"
        data_tests:
          - accepted_values:
              values: ['early_adopter', 'mid_adopter', 'late_adopter']

  - name: silver__products
    description: "Product catalog with price tiers"
    columns:
      - name: product_id
        description: "Primary key"
        data_tests:
          - unique
          - not_null
      - name: price_tier
        data_tests:
          - accepted_values:
              values: ['low', 'medium', 'high', 'premium']

  - name: silver__orders
    description: "Cleaned orders with validity flag"
    columns:
      - name: order_id
        description: "Primary key"
        data_tests:
          - unique
          - not_null
      - name: customer_id
        data_tests:
          - not_null

  - name: silver__order_items
    description: "Order items enriched with product info"
    columns:
      - name: item_id
        description: "Primary key"
        data_tests:
          - unique
          - not_null
      - name: line_total
        description: "quantity * unit_price"
        data_tests:
          - not_null

  - name: silver__orders_enriched
    description: "Orders joined with customers and item aggregations"
    columns:
      - name: order_id
        description: "Primary key"
        data_tests:
          - unique
          - not_null